{"version":2,"baseVals":{"rating":4,"gammaadj":1.32,"decay":1,"echo_zoom":1.22,"echo_alpha":0.15,"wave_mode":5,"darken":1,"wave_a":0.691,"wave_scale":4.778,"wave_smoothing":0,"modwavealphastart":0.71,"modwavealphaend":1.3,"warpscale":1.331,"fshader":1,"zoom":0.99951,"warp":0.0101,"wave_r":0.65,"wave_g":0.65,"wave_b":0.65,"ob_size":0.015,"ob_a":0.1,"ib_size":0,"mv_a":0},"shapes":[{"baseVals":{"enabled":1,"textured":1,"y":1.8},"init_eqs_str":"","frame_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":""},{"baseVals":{"enabled":1,"textured":1,"y":1.8},"init_eqs_str":"","frame_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":""},{"baseVals":{"enabled":1,"textured":1,"y":1.8},"init_eqs_str":"","frame_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":""},{"baseVals":{"enabled":0},"init_eqs_str":"","frame_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":""}],"waves":[{"baseVals":{"enabled":0},"init_eqs_str":"","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""},{"baseVals":{"enabled":0},"init_eqs_str":"","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""},{"baseVals":{"enabled":0},"init_eqs_str":"","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""},{"baseVals":{"enabled":0},"init_eqs_str":"","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""}],"init_eqs_str":"a.xx=0;a.w=0;a.decay_rate=0;a.res=0;a.q12=0;a.q18=0;a.q13=0;a.diff=0;a.prev_beat=0;a.is_beat=0;a.q11=0;a.ry=0;a.rx=0;a.min_att=0;a.beat=0;a.q17=0;a.vol=0;a.decay_to=0;a.q14=0;a.m=0;a.beat_level=0;a.yy=0;","frame_eqs_str":"a.wave_r+=.5*Math.sin(1.13*a.time);a.wave_g+=.5*Math.sin(1.23*a.time);a.wave_b+=.5*Math.sin(1.33*a.time);a.wave_x+=.2*Math.sin(.32*a.time);a.wave_y+=.2*Math.cos(.32*a.time);a.ob_r=a.wave_r;a.ob_g=a.wave_g;a.ob_b=a.wave_b;a.vol=8*a.bass+5*a.mid+3*a.treb;a.m=.97*a.m+.08*a.vol;a.monitor=a.vol;a.beat=above(a.vol,a.res)*above(a.vol,a.m)*above(a.vol,16);a.diff=(1-a.beat)*a.diff+a.beat*(a.vol-a.res);a.res=a.beat*(a.vol+.04*a.m)+(1-a.beat)*(a.res-div(60*(.1+.02*a.diff),a.fps));a.res=\nMath.max(0,a.res);a.w=.00001<Math.abs(a.beat)?div(rand(4096),1024)*Math.asin(1):a.w;a.xx=.00001<Math.abs(a.beat)?.1+div(rand(800),1E3):a.xx;a.yy=.00001<Math.abs(a.beat)?.1+div(rand(800),1E3):a.yy;a.decay_rate=pow(.995,a.fps);a.min_att=2.2;a.decay_to=1;a.beat=div(a.bass,Math.max(a.min_att,a.bass_att));a.beat=Math.max(a.beat,div(a.mid,Math.max(a.min_att,a.mid_att)));a.beat=Math.max(a.beat,div(a.treb,Math.max(a.min_att,a.treb_att)));a.beat=Math.max(a.beat,(a.prev_beat-a.decay_to)*a.decay_rate+a.decay_to);\na.beat_level=24*(a.beat-a.prev_beat-.07);a.is_beat=above(a.beat_level,.5);a.prev_beat=a.beat;a.w=.00001<Math.abs(a.is_beat)?a.w+div(rand(256)-128,1024):a.w;a.xx=.00001<Math.abs(a.is_beat)?a.xx+div(rand(256)-128,4096):a.xx;a.yy=.00001<Math.abs(a.is_beat)?a.yy+div(rand(256)-128,4096):a.yy;a.q11=Math.sin(a.w);a.q12=Math.cos(a.w);a.q13=a.xx;a.q14=a.yy;a.q17=Math.sin(-a.w);a.q18=Math.cos(-a.w);","pixel_eqs_str":"a.rx=a.ang;a.ry=a.rad;a.rot=div(Math.sin(Math.floor(1+2.864*a.ry)*(8446669+667777*Math.sin(div(a.time,21774898)+div(a.treb,55559599)))),2)+.5;a.zoom=div(Math.sin(Math.floor(1+2.654*a.rx)*(4747833+754166*Math.sin(div(a.time,26666825)+div(a.mid,59555599)))),2)+.5;a.rot=div(Math.sin(a.rot*a.rot*a.rad*88),399);a.zoom=1-div(Math.sin(sqr(a.zoom)*a.ang*88),356)-.004141*(1-a.rad);a.dx=a.dx;a.dy=a.dy;","init_eqs_eel":"","frame_eqs_eel":"wave_r = wave_r + 0.5*sin(time*1.13);\nwave_g = wave_g + 0.5*sin(time*1.23);\nwave_b = wave_b + 0.5*sin(time*1.33);\n\nwave_x = wave_x + 0.2*sin(0.32*time);\nwave_y = wave_y + 0.2*cos(0.32*time);\n\nob_r = wave_r;\nob_g = wave_g;\nob_b = wave_b;\n\n\n//lines below belong to the composite shader (flexis kaleidoscope)\n\n//flexi's beat detection (made for breakbeats)\nvol = bass*8 + mid*5 + treb*3;\nm = m*0.97 + vol*0.08;\nmonitor = vol;\nbeat = above(vol,res)*above(vol,m)*above(vol,16);\ndiff = (1-beat)*diff + beat*(vol-res);\nres = beat*(vol + m*0.04) + (1-beat)*(res -  (0.1+diff*0.02)*60/fps);\nres = max(0,res);\n\nw = if(beat, rand(4096)/1024*asin(1),w); // on beat: randomize pos and angle of the kaleidoscope\nxx = if(beat, 0.1 + rand(800)/1000, xx);\nyy = if(beat, 0.1 + rand(800)/1000, yy);\n\n//geiss' custom beat detection code: (fps-independent; quiet songs don't freak out)\ndecay_rate = pow(0.995, fps);  // lower # = more hasty to declare a beat\nmin_att    = 2.2;               // lower # = quieter songs can declare beats\ndecay_to   = 1;               // lower # = more hasty to declare a beat\nbeat =           bass/max(min_att,bass_att);\nbeat = max(beat, mid /max(min_att,mid_att ));\nbeat = max(beat, treb/max(min_att,treb_att));\nbeat = max( beat, (prev_beat-decay_to)*decay_rate + decay_to );\nbeat_level     = (beat - prev_beat - 0.07)*24;\nis_beat = above(beat_level, 0.5);\nprev_beat = beat;\n\nw  = if(is_beat, w + (rand(256)-128)/1024, w);  // on beat: random increment of pos and angle\nxx = if(is_beat, xx + (rand(256)-128)/4096, xx);\nyy = if(is_beat, yy + (rand(256)-128)/4096, yy);\n\n\nq11 = sin(w); // w - angle of kaleidoscope\nq12 = cos(w);\nq13 = xx;     // center of kaleidoscope window\nq14 = yy;\nq17 = sin(-w);\nq18 = cos(-w);","pixel_eqs_eel":"rx=ang;//+sin(x*7);\nry=rad;//+sin(x*5);\n\nrot=sin(int(1+ry*2.864)*(8446669+sin(time/21774898+treb/55559599)*667777))/2+.5;\nzoom=sin(int(1+rx*2.654)*(4747833+sin(time/26666825+mid/59555599)*754166))/2+.5;\n//zoom=.999;\nrot=sin(rot*rot*rad*88)/399;\nzoom=1-sin(sqr(zoom)*ang*88)/356-.004141*(1-rad);\ndx=dx;\ndy=dy;","warp":"","comp":" shader_body { \n  vec2 uv_rr_1;\n  vec2 uv_r_2;\n  vec2 tmpvar_3;\n  tmpvar_3.x = q13;\n  tmpvar_3.y = q14;\n  vec2 tmpvar_4;\n  tmpvar_4 = ((uv - tmpvar_3) * aspect.xy);\n  vec2 tmpvar_5;\n  tmpvar_5.x = ((q12 * tmpvar_4.x) - (q11 * tmpvar_4.y));\n  tmpvar_5.y = ((q11 * tmpvar_4.x) + (q12 * tmpvar_4.y));\n  uv_r_2 = (4.0 * tmpvar_5);\n  uv_r_2 = (tmpvar_3 + (uv_r_2 * aspect.zw));\n  uv_r_2 = (1.0 - abs((\n    (fract((uv_r_2 * 0.5)) * 2.0)\n   - 1.0)));\n  vec2 tmpvar_6;\n  tmpvar_6 = ((uv_r_2 - tmpvar_3) * aspect.xy);\n  vec2 tmpvar_7;\n  tmpvar_7.x = ((q18 * tmpvar_6.x) - (q17 * tmpvar_6.y));\n  tmpvar_7.y = ((q17 * tmpvar_6.x) + (q18 * tmpvar_6.y));\n  uv_rr_1 = (4.0 * tmpvar_7);\n  uv_rr_1 = (tmpvar_3 + ((\n    (uv_rr_1 - tmpvar_3)\n   * aspect.zw) * 0.06));\n  uv_rr_1 = (1.0 - abs((\n    (fract((uv_rr_1 * 0.5)) * 2.0)\n   - 1.0)));\n  vec4 tmpvar_8;\n  tmpvar_8.w = 1.0;\n  tmpvar_8.xyz = pow (((\n    abs((((texture (sampler_blur3, uv_rr_1).xyz * scale3) + bias3) - texture (sampler_main, uv_rr_1).xyz))\n   * 3.0) + 0.1), vec3(1.5, 1.5, 1.5));\n  ret = tmpvar_8.xyz;\n }","warp_hlsl":"","comp_hlsl":"shader_body\n{\n// Flexis Kaleidoscope\n\nfloat2 cntr = float2(q13,q14);\nfloat sin = q11;\nfloat cos = q12;\n\nfloat2 uv_r = (uv-cntr)*aspect.xy;\n       uv_r = 4*float2( cos*uv_r.x - sin*uv_r.y, sin*uv_r.x + cos*uv_r.y); // rotation\n       uv_r = cntr + uv_r*aspect.zw;\n       uv_r = 1.0 - abs( frac( uv_r * 0.5 ) * 2.0 - 1.0 ); // Eo.S' mirror code\n\n sin = q17;\n cos = q18;\n\nfloat2 uv_rr = (uv_r-cntr)*aspect.xy;\n       uv_rr = 4*float2( cos*uv_rr.x - sin*uv_rr.y, sin*uv_rr.x + cos*uv_rr.y); // counter-rotation\n       uv_rr = cntr + (uv_rr-cntr)*aspect.zw*0.06;\n       uv_rr = 1.0 - abs( frac( uv_rr * 0.5 ) * 2.0 - 1.0 ); // Eo.S' mirror code\n\n// now use uv_rr for tone-mapping\n//uv_rr = uv;\nret = pow(abs(GetBlur3(uv_rr)-GetPixel(uv_rr))*3+0.1,1.5);\n}"}