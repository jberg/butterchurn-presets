{"version":2,"baseVals":{"rating":5,"decay":1,"echo_zoom":1,"echo_alpha":0.5,"echo_orient":3,"invert":1,"wave_a":0.001,"warpanimspeed":100,"warpscale":0.01,"zoomexp":1.14947,"warp":0,"sx":0.9901,"sy":0.9901,"wave_r":0,"wave_g":0,"wave_b":0,"ob_size":0,"ob_r":1,"ob_g":1,"ob_b":1,"ib_r":1,"ib_g":1,"ib_b":1,"mv_a":0},"shapes":[{"baseVals":{"sides":30,"textured":1,"x":0.89,"y":0.86,"rad":0.92324,"tex_ang":1.19381,"tex_zoom":0.2274,"g":1,"b":1,"a":0.5,"r2":1,"b2":1,"border_r":0,"border_g":0,"border_a":0,"enabled":0},"init_eqs_str":"tex_saw = 0.4;","frame_eqs_str":"","init_eqs_eel":"tex_saw = 0.4;","frame_eqs_eel":""},{"baseVals":{"sides":30,"textured":1,"x":0.16,"y":0.73,"rad":0.9998,"tex_zoom":0.21006,"g":1,"b":1,"r2":1,"b2":1,"border_r":0,"border_g":0,"border_a":0,"enabled":0},"init_eqs_str":"tex_saw = 0.4;","frame_eqs_str":"","init_eqs_eel":"tex_saw = 0.4;","frame_eqs_eel":""},{"baseVals":{"sides":100,"rad":0.22167,"border_a":1,"enabled":0},"init_eqs_str":"","frame_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":""},{"baseVals":{"enabled":1,"sides":100,"g":1,"b":1,"r2":1,"b2":1,"border_a":0},"init_eqs_str":"a.q4=0;a.q3=0;a.xx=0;a.yy=0;a.radi=0;a.q1=0;","frame_eqs_str":"a.a=above(a.q4,1E3-div(9E3,a.fps))&&above(a.q3,1.5)?1:0;a.a2=above(a.q4,1E3)&&above(a.q3,1.5)?1:0;a.xx=(above(a.q4,1E3-div(3,a.fps)),.01*rand(100));a.yy=.00001<Math.abs(above(a.q4,1E3-div(3,a.fps)))?.01*rand(100):.01*rand(70)+.15;a.radi=.00001<Math.abs(above(a.q4,1E3-div(3,a.fps)))?.333*sqrt(a.q3)+.15:.4*sqrt(a.q3);a.rad=a.radi;a.x=a.xx;a.y=a.yy;a.r=.5*Math.sin(1.22*a.q1)+.6;a.g=.45+.45*Math.sin(1.307*a.q1);a.b=.45+.45*Math.sin(1.959*a.q1);a.r2=.5*Math.sin(1.622*a.q1)+.6;a.g2=\n.45+.45*Math.sin(1.507*a.q1);a.b2=.45+.45*Math.sin(1.6559*a.q1);","init_eqs_eel":"","frame_eqs_eel":"a = above(q4,1000 - 9000/fps) && above(q3, 1.5);\na2 = above(q4,1000) && above(q3, 1.5);\n\nxx = if(above(q4,1000 - 3/fps), rand(100)*0.01, rand(100)*0.01);\nyy = if(above(q4,1000 - 3/fps), rand(100)*0.01, rand(70)*0.01 + .15);\nradi = if(above(q4, 1000 - 3/fps), sqrt(q3)*.333 + .15, sqrt(q3)*.4);\n\nrad = radi;\n\nx = xx;\ny = yy;\n\n\nr = 0.5 + 0.5*sin(q1*1.22) + 0.1;\ng = 0.45 + 0.45*sin(q1*1.307);\nb = 0.45 + 0.45*sin(q1*1.959);\n\n\nr2 = 0.5 + 0.5*sin(q1*1.622) + 0.1;\ng2 = 0.45 + 0.45*sin(q1*1.507);\nb2 = 0.45 + 0.45*sin(q1*1.6559);"}],"waves":[{"baseVals":{"enabled":1,"spectrum":1,"thick":1,"a":0.42},"init_eqs_str":"a.zs=0;a.speed=0;a.q3=0;a.q29=0;a.q30=0;a.q4=0;","frame_eqs_str":"","point_eqs_str":"a.zs=.00001<Math.abs(below(a.zs,-9.42478))?0:a.zs;a.zs=.00001<Math.abs(above(a.zs,9.42478))?0:a.zs;a.speed=.0025*Math.floor(Math.tan(pow(a.q3,.667)))*(1.5708*Math.atan(a.bass)+1.5708*Math.atan(a.mid)+1.5708*Math.atan(a.treb));a.zs+=a.speed;a.x=.5+(.18+.005*pow(a.q3,1.25))*Math.cos(a.zs*Math.asin(1)*100);a.y=.5+(.18+.005*pow(a.q3,1.25))*Math.sin(a.zs*Math.asin(1)*100);.00001<Math.abs(above(a.mid+a.treb,2*a.bass))?a.r=.3-Math.abs(.33*Math.sin(1-a.q29*a.bass*a.bass)):a.r=.7+Math.abs(.33*\nMath.sin(1-a.q29*a.bass*a.bass));.00001<Math.abs(above(a.bass+a.treb,2*a.mid))?a.g=.3-Math.abs(.33*Math.sin(1-a.q30*a.mid*a.mid)):a.g=.7+Math.abs(.33*Math.sin(1-a.q30*a.mid*a.mid));.00001<Math.abs(below(a.mid+a.bass,2*a.treb))?a.b=.3-Math.abs(.33*Math.sin(1-a.q3*a.treb*a.treb)):a.b=.7+Math.abs(.33*Math.sin(1-a.q3*a.treb*a.treb));a.a=.175+.0007*a.q4;","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":"//init\nzs = if(below(zs,-9.42478),0,zs);\n\nzs = if(above(zs, 9.42478),0, zs);\n\nspeed = .0025*floor(tan(pow(q3, .667)))*(1.5708*atan(bass) + 1.5708*atan(mid) + 1.5708*atan(treb)); //pattern source?\n\n//sum\nzs += speed; //resonant beat detection\n\n//project position and radius and pattern speed & beat detection\nx = 0.5 + (0.18 + pow(q3, 1.25)*.005)*cos(zs*asin(1)*100);\ny = 0.5 + (0.18 + pow(q3, 1.25)*.005)*sin(zs*asin(1)*100);\n\n\n// color waveform to bass / mid / treble\nif(above(mid + treb, bass*2), r = .3 - abs(.33*sin(1 - q29*bass*bass)), r = .7 + abs(.33*sin(1 - q29*bass*bass)));\nif(above(bass + treb, mid*2), g = .3 - abs(.33*sin(1 - q30*mid*mid)), g = .7 + abs(.33*sin(1 - q30*mid*mid)));\nif(below(mid + bass, treb*2), b = .3 - abs(.33*sin(1 - q3*treb*treb)), b = .7 + abs(.33*sin(1 - q3*treb*treb)));\n\n//match opacity to nearness of central beat\na = .175 + q4*.0007;"},{"baseVals":{"samples":64,"spectrum":1,"thick":1,"enabled":0},"init_eqs_str":"","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""},{"baseVals":{"spectrum":1,"thick":1,"a":0.42,"enabled":0},"init_eqs_str":"","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""},{"baseVals":{"thick":1,"enabled":0},"init_eqs_str":"","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""}],"init_eqs_str":"a.foo_r=0;a.maxs=0;a.n=0;a.ampl=0;a.bd_minbpm=0;a.im=0;a.basstime=0;a.bd_mean=0;a.timediff=0;a.bd_src=0;a.bass_residual=0;a.bd_slot=0;a.bd_b=0;a.bd_oct=0;a.tcos=0;a.stickybit=0;a.bd_arg=0;a.old_treb_flop=0;a.quali=0;a.q12=0;a.foo_b=0;a.bass_flop=0;a.q22=0;a.q21=0;a.volavg2=0;a.q13=0;a.q15=0;a.q29=0;a.dt=0;a.bd_pk=0;a.maxo=0;a.bd_m=0;a.q1=0;a.bd_cos=0;a.q5=0;a.foo_g=0;a.treb_flop=0;a.sample1=0;a.bass_thresh=0;a.difftime=0;a.dec_s=0;a.old_bass_flop=0;a.bd_exc=0;a.dec_xs=0;a.kraft=\n0;a.diff=0;a.treb_thresh=0;a.bd_ampl=0;a.bd_mid_=0;a.maxind=0;a.edge=0;a.tsin=0;a.re0=0;a.testi=0;a.ec_steps=0;a.creep=0;a.q31=0;a.bpm=0;a.q23=0;a.q24=0;a.pulse=0;a.q11=0;a.bd_bass_=0;a.bd_tab0=0;a.pv_beat=0;a.bass_changed=0;a.show=0;a.mid_thresh=0;a.dec_m=0;a.q4=0;a.im0=0;a.bd_spo=0;a.mid_changed=0;a.entropy=0;a.test0=0;a.bd_nres=0;a.bd_bass=0;a.maxa=0;a.volavg=0;a.feder=0;a.q16=0;a.bd_recsz=0;a.old_mid_flop=0;a.mid_residual=0;a.bit2=0;a.tstart=0;a.bd_omega=0;a.bd_treb_=0;a.beatsin=0;a.bd_tabptr=\n0;a.bd_treb=0;a.treb_residual=0;a.q19=0;a.beat=0;a.vol=0;a.bd_mid=0;a.chaos=0;a.bd_dat0=0;a.prog=0;a.mid_flop=0;a.re=0;a.bd_t=0;a.beatcos=0;a.q2=0;a.time_st=0;a.q14=0;a.treb_changed=0;a.bd_maxbpm=0;a.bd_qual=0;a.vol2=0;a.q3=0;a.t0=0;a.vol_=0;a.m=0;a.oct=0;a.quad=0;a.q32=0;a.basssum=0;a.creepo=0;a.q28=0;a.bd_sin=0;a.sample2=0;a.q30=0;a.change=0;a.beatct=0;a.q20=0;a.q8=0;a.bd_finc=0;for(var b=a.index=0;2E5>b;b++)a.megabuf[Math.floor(a.index)]=0,a.gmegabuf[Math.floor(a.index)]=0,a.index+=1;a.tstart=\na.time;a.bd_recsz=8;a.bd_oct=4;a.bd_spo=30;a.bd_finc=pow(2,div(1,a.bd_spo));a.bd_nres=a.bd_oct*a.bd_spo;a.bd_minbpm=20;a.bd_maxbpm=pow(2,a.bd_oct)*a.bd_minbpm;a.bd_dat0=1E5;a.bd_tab0=a.bd_dat0+a.bd_nres*a.bd_recsz*3;a.reg00=a.bd_minbpm;a.reg01=a.bd_maxbpm;a.reg02=a.bd_recsz;a.reg03=a.bd_nres;a.reg05=a.bd_finc;a.reg06=a.bd_dat0;a.reg07=a.bd_mp0;a.time_st=0;a.timediff=1;","frame_eqs_str":"a.dt=Math.min(div(1,a.fps),.1);a.dec_m=1-4*a.dt;a.dec_s=1-a.dt;a.dec_xs=1-div(a.dt,6);a.t0=a.time-a.tstart;a.bd_b=a.bass;a.bd_bass_=a.bd_bass_*a.dec_m+(1-a.dec_m)*a.bd_b;a.bd_bass=a.bd_b-a.bd_bass_;a.bd_m=a.mid;a.bd_mid_=a.bd_mid_*a.dec_m+(1-a.dec_m)*a.bd_m;a.bd_mid=a.bd_m-a.bd_mid_;a.bd_t=a.treb;a.bd_treb_=a.bd_treb_*a.dec_m+(1-a.dec_m)*a.bd_t;a.bd_treb=a.bd_t-a.bd_treb_;a.n=0;a.bpm=a.bd_minbpm;for(var b=0;b<a.bd_nres;b++)a.gmegabuf[Math.floor(5E4+a.n*a.bd_recsz)]=0,a.bd_arg=\ndiv(a.bpm,60)*a.t0*6.283,a.gmegabuf[Math.floor(a.bd_tab0+a.n*a.bd_recsz)]=a.bpm,a.bpm*=a.bd_finc,a.n+=1;for(b=a.bd_src=0;3>b;b++){a.bd_exc=a.bd_bass*(.00001>Math.abs(a.bd_src-0)?1:0)+a.bd_mid*(.00001>Math.abs(a.bd_src-1)?1:0)+a.bd_treb*(.00001>Math.abs(a.bd_src-2)?1:0);for(var c=a.oct=0;c<a.bd_oct;c++){a.bd_slot=0;a.bd_pk=0;for(var d=a.bd_mean=0;d<a.bd_spo;d++){a.bd_tabptr=a.bd_tab0+(a.oct*a.bd_spo+a.bd_slot)*a.bd_recsz;a.n=a.bd_dat0+(a.bd_nres*a.bd_src+a.oct*a.bd_spo+a.bd_slot)*a.bd_recsz;a.bpm=\na.gmegabuf[Math.floor(a.bd_tabptr)];a.bd_omega=6.283*div(a.bpm,60);a.feder=sqr(a.bd_omega);a.gmegabuf[Math.floor(a.n+4)]=a.gmegabuf[Math.floor(a.n+2)];a.gmegabuf[Math.floor(a.n+1)]*=1-.5*a.dt*sqrt(div(a.bpm,300));a.ec_steps=2*Math.floor(1+div(a.bpm,50));for(var e=0;e<a.ec_steps;e++)a.kraft=a.bd_exc-a.feder*a.gmegabuf[Math.floor(a.n+2)],a.gmegabuf[Math.floor(a.n+1)]+=div(a.kraft*a.dt,a.ec_steps),a.gmegabuf[Math.floor(a.n+2)]+=div(a.gmegabuf[Math.floor(a.n+1)]*a.dt,a.ec_steps);a.beatcos=a.gmegabuf[Math.floor(a.n+\n1)];a.beatsin=a.gmegabuf[Math.floor(a.n+2)]*a.bd_omega;a.quad=sqrt(pow(a.beatsin,2)+pow(a.beatcos,2));a.gmegabuf[Math.floor(a.n)]=.8*a.gmegabuf[Math.floor(a.n)]+.2*a.quad;a.bd_ampl=a.gmegabuf[Math.floor(a.n)];a.bd_mean+=a.bd_ampl;.00001<Math.abs(a.bd_ampl>a.bd_pk?1:0)?a.bd_pk=a.bd_ampl:0;a.bd_slot+=1}a.bd_slot=0;a.bd_qual=pow(div(a.bd_pk,a.bd_mean)*a.bd_spo-1,1);a.gmegabuf[Math.floor(2*(a.bd_src*a.bd_oct+a.oct))]=a.bd_qual;for(d=0;d<a.bd_spo;d++)a.m=5E4+(a.bd_slot+0*a.oct*a.bd_spo)*a.bd_recsz,a.n=\na.bd_dat0+(a.bd_nres*a.bd_src+a.oct*a.bd_spo+a.bd_slot)*a.bd_recsz,a.gmegabuf[Math.floor(a.m)]+=div(a.bd_qual*a.gmegabuf[Math.floor(a.n)],12),a.bd_slot+=1;a.oct+=1}a.bd_src+=1}a.bd_slot=0;a.maxind=0;a.bd_pk=0;for(b=a.bd_mean=0;b<a.bd_spo;b++)a.m=5E4+a.bd_slot*a.bd_recsz,a.gmegabuf[Math.floor(a.m)]=pow(a.gmegabuf[Math.floor(a.m)],1),a.bd_mean+=a.gmegabuf[Math.floor(a.m)],.00001<Math.abs(a.gmegabuf[Math.floor(a.m)]>a.bd_pk?1:0)?(a.bd_pk=a.gmegabuf[Math.floor(a.m)],a.maxind=a.bd_slot):0,a.bd_slot+=1;\na.quali=div(a.bd_pk,a.bd_mean)*a.bd_spo-1;for(b=a.n=0;150>b;b++)a.gmegabuf[Math.floor(50+a.n)]*=0,a.n+=1;a.bd_src=0;a.tsin=0;for(b=a.tcos=0;3>b;b++){for(c=a.oct=0;c<a.bd_oct;c++)a.n=a.bd_dat0+(a.bd_nres*a.bd_src+a.oct*a.bd_spo+a.maxind)*a.bd_recsz,a.bd_tabptr=a.bd_tab0+(a.oct*a.bd_spo+a.maxind)*a.bd_recsz,a.bpm=a.gmegabuf[Math.floor(a.bd_tabptr)],a.im=a.gmegabuf[Math.floor(a.n+1)],a.re=6.283*div(a.gmegabuf[Math.floor(a.n+2)]*a.bpm,60),a.bd_cos=Math.cos(6.28*div(a.bpm,60)*a.time),a.bd_sin=-Math.sin(6.28*\ndiv(a.bpm,60)*a.time),a.re0=a.re*a.bd_cos+a.im*a.bd_sin,a.im0=-a.re*a.bd_sin+a.im*a.bd_cos,a.bd_qual=a.gmegabuf[Math.floor(2*(a.bd_src*a.bd_oct+a.oct))],a.gmegabuf[Math.floor(50+4*a.oct)]+=a.bd_qual*a.im0,a.gmegabuf[Math.floor(4*a.oct+51)]+=a.bd_qual*a.re0,a.gmegabuf[Math.floor(4*a.oct+52)]+=a.bd_qual,a.gmegabuf[100]+=a.bd_qual*a.im0,a.gmegabuf[101]+=a.bd_qual*a.re0,a.re=a.bd_cos*a.re0+a.bd_sin*a.im0,a.im=-a.bd_cos*a.im0+a.bd_sin*a.re0,a.tsin+=5*a.im,a.oct+=1;a.bd_src+=1}a.q30=a.tsin;a.vol=a.bass_att+\na.mid_att+a.treb_att;a.vol_=.95*a.vol_+.05*a.vol;a.q29=a.vol-a.vol_;a.bd_src=0;a.maxo=0;a.maxs=0;for(b=a.maxa=0;3>b;b++){a.oct=1;for(c=0;c<a.bd_oct-1;c++)a.n=a.bd_dat0+(a.bd_nres*a.bd_src+a.oct*a.bd_spo+a.maxind)*a.bd_recsz,a.bd_qual=a.gmegabuf[Math.floor(2*(a.bd_src*a.bd_oct+a.oct))],a.ampl=div(a.bd_qual,1+a.oct*div(a.maxind,a.bd_oct)*0),.00001<Math.abs(a.ampl>a.maxa?1:0)?(a.maxa=a.ampl,a.maxs=a.bd_src,a.maxo=a.oct):0,a.oct+=1;a.bd_src+=1}a.q28=pow(4*a.bd_qual,1.5);a.q31=a.q28;.00001<Math.abs(above(a.q28,\n50))?a.q28=pow(5*Math.sin(.5*a.bd_qual),2):0;a.testi=a.bd_nres*a.maxs+a.bd_spo*a.maxo+a.maxind;.00001<Math.abs(bor(a.beat&&.00001>Math.abs(a.prog-0)?1:0,2>Math.abs(a.testi-a.test0)?1:0))?a.test0=a.testi:0;a.n=a.bd_dat0+a.test0*a.bd_recsz;a.creep=a.gmegabuf[Math.floor(a.n+1)];a.beat=(0<a.creep?1:0)*(0>a.creepo?1:0);a.beatct=.00001<Math.abs(a.change)?0:a.beatct+a.beat;a.prog=mod(a.prog+a.beat,8);a.creepo=a.creep;a.show=.00001<Math.abs(a.beat)?1:.5*a.show;a.q4=1E3*div(a.gmegabuf[Math.floor(a.n+1)],a.gmegabuf[Math.floor(a.n)]);\na.q2=a.prog;.00001<Math.abs(a.beat)?(a.timediff=a.time-a.time_st,a.time_st=a.time):a.timediff=a.timediff;.00001<Math.abs(below(a.timediff,.0625))?a.timediff=.0625:a.timediff=a.timediff;a.q8=a.timediff;a.monitor=a.q8;a.q24=a.bd_maxbpm;a.old_bass_flop=a.bass_flop;a.old_treb_flop=a.treb_flop;a.old_mid_flop=a.mid_flop;a.chaos=.9+.1*Math.sin(a.pulse);a.entropy=.00001<Math.abs(equal(a.pulse,-20))?1+a.bass_flop+a.treb_flop+a.mid_flop+.002*a.q4:a.entropy;a.bass_thresh=2*above(a.bass_att,a.bass_thresh)+(1-\nabove(a.bass_att,a.bass_thresh))*((a.bass_thresh-1.6)*a.chaos+1.6);a.bass_flop=Math.abs(a.bass_flop-equal(a.bass_thresh,2));a.treb_thresh=2*above(a.treb_att,a.treb_thresh)+(1-above(a.treb_att,a.treb_thresh))*((a.treb_thresh-1.6)*a.chaos+1.6);a.treb_flop=Math.abs(a.treb_flop-equal(a.treb_thresh,2));a.mid_thresh=2*above(a.mid_att,a.mid_thresh)+(1-above(a.mid_att,a.mid_thresh))*((a.mid_thresh-1.6)*a.chaos+1.6);a.mid_flop=Math.abs(a.mid_flop-equal(a.mid_thresh,2));a.bass_changed=bnot(equal(a.old_bass_flop,\na.bass_flop));a.mid_changed=bnot(equal(a.old_mid_flop,a.mid_flop));a.treb_changed=bnot(equal(a.old_treb_flop,a.treb_flop));a.bass_residual=a.bass_changed*Math.sin(1.5*a.pulse)+bnot(a.bass_changed)*a.bass_residual;a.treb_residual=a.treb_changed*Math.sin(1.5*a.pulse)+bnot(a.treb_changed)*a.treb_residual;a.mid_residual=a.mid_changed*Math.sin(1.5*a.pulse)+bnot(a.mid_changed)*a.mid_residual;a.pulse=.00001<Math.abs(above(Math.abs(a.pulse),20))?-20:a.pulse+.018*(a.bass_thresh+a.mid_thresh+a.treb_thresh);\na.q11=a.mid_residual;a.q12=a.bass_residual;a.q13=a.treb_residual;a.q14=Math.sin(a.pulse);a.q15=Math.cos(a.pulse*(.5+.1*a.entropy));a.q16=Math.sin(a.pulse*(.5+pow(.25,a.entropy)));a.ob_r=Math.sin(1.0785*a.time+a.q16);a.ob_b=Math.sin(.8445*a.time+a.q15);a.ob_g=Math.sin(.413*a.time+a.q14);a.ib_r=Math.cos(.6*a.time+.1*a.q11);a.ib_b=Math.cos(1.4055*a.time+.1*a.q12);a.ib_g=Math.cos(.833*a.time+.1*a.q13);a.ib_size=.05+.03*a.q12;a.ob_size=.03+.02*Math.sin(2.321*a.time+.2*a.q12);a.ob_a=.6+.4*a.q13;a.ib_a=\n.9+.1*Math.sin(.3*a.q12+a.q14+.5*a.q11);a.rot=0;a.basstime+=div(3*a.q29,a.fps);a.q1=a.basstime;a.basstime=.00001<Math.abs(below(a.basstime,-1E4))?0:a.basstime;a.basstime=.00001<Math.abs(above(a.basstime,1E4))?0:a.basstime;a.basstime+=div(.75*a.bass_att,a.fps);a.vol2=pow(a.bass+a.mid+a.treb,2);a.basssum=a.vol2;a.stickybit=mod(a.time,2);a.volavg+=a.vol2*equal(a.stickybit,1);a.sample1+=equal(a.stickybit,1);a.volavg2+=a.vol2*equal(a.stickybit,0);a.sample2+=equal(a.stickybit,0);a.edge=bnot(equal(a.bit2,\na.stickybit));a.volavg-=a.volavg*a.edge*a.stickybit;a.volavg2-=a.volavg2*a.edge*equal(a.stickybit,0);a.sample1-=a.sample1*a.edge*a.stickybit;a.sample2-=a.sample2*a.edge*equal(a.stickybit,0);a.diff=.00001<Math.abs(equal(a.stickybit,1))?div(a.basssum,div(a.volavg2,a.sample2)):0;a.diff=.00001<Math.abs(equal(a.stickybit,0))?div(a.basssum,div(a.volavg,a.sample1)):a.diff;a.q3=a.diff;a.pv_beat=.2*a.pv_beat*sqrt(div(a.fps,30))+div(.0001*(a.bass_att*a.bass_att+a.mid_att*a.mid_att+a.treb_att*a.treb_att)*a.q4,\nsqrt(a.q8));a.q32=a.pv_beat;a.monitor=a.q32;a.bit2=mod(a.time,2);a.difftime+=.03*a.diff;a.q2=a.difftime;a.warp=.005*(a.bass*a.bass+a.mid*a.mid+a.treb*a.treb);a.foo_r=Math.sin(.34313*a.q1);a.foo_g=Math.sin(.3675*a.q1);a.foo_b=Math.sin(.55095*a.q1);.00001<Math.abs(above(a.foo_r,a.foo_g)&&above(a.foo_r,a.foo_b)?1:0)?a.q23=1:a.q23=0;.00001<Math.abs(above(a.foo_g,a.foo_r)&&above(a.foo_g,a.foo_b)?1:0)?a.q21=1:a.q21=0;.00001<Math.abs(above(a.foo_b,a.foo_r)&&above(a.foo_b,a.foo_g)?1:0)?a.q22=1:a.q22=0;.00001<\nMath.abs(equal(a.q11+a.q12+a.q13,0))?a.q22=1:0;a.q5=div(30,a.fps);a.q19=50;a.q20=1;.00001<Math.abs(above(a.q31,14))?a.q19=100:a.q19=a.q19;.00001<Math.abs(above(a.q31,50))?a.q19=500:a.q19=a.q19;.00001<Math.abs(above(a.q3,2))?a.q19=.5+10*a.q8:a.q19=a.q19;","pixel_eqs_str":".00001<Math.abs(a.q32>1.2*sqrt(a.bass_att)?1:0)?(a.rot=.00001<Math.abs(above(a.q14,0))?.2*a.rad*a.q15:Math.tan(.001*a.rad*a.q4),a.zoom=.00001<Math.abs(above(a.q12,1.5))?a.zoom+(1-a.zoom)*a.rot*Math.cos(3.14*a.rad*a.q12):.00001<Math.abs(above(a.q13,2)*above(a.x,.5+.5*a.q15))?a.zoom+(1-a.zoom)*Math.sin(a.q11*a.rot*3.14):a.zoom+(1-a.zoom)*Math.cos(3*a.rad*a.q16),a.dx=above(a.q11,0)*Math.sin(.5*a.rad*a.q12),a.dy=above(a.q13,0)*Math.sin(.5*a.rad*a.q13)):(a.zoom=a.q19,a.zoomexp=a.q20,\na.rot=0);","init_eqs_eel":"index = 0;\nloop (200000,\n  megabuf(index) = 0;\n  gmegabuf(index) = 0;\n  index = index + 1;\n);\n\ntstart = time;\n\nbd_recsz   = 8;\nbd_oct     = 4; //Oktaven\nbd_spo     = 30;//Res. pro Oktave\nbd_finc    = pow(2.0,1/bd_spo); //Freq. Incr. \nbd_nres    = bd_oct * bd_spo;\nbd_minbpm  = 20;\nbd_maxbpm  = pow(2,bd_oct)*bd_minbpm;\n\n//mem spaces\nbd_dat0    = 100000;\nbd_tab0     = bd_dat0 + bd_nres * bd_recsz * 3;\n\n\n//Fill BPM Tab\n//n = bd_dat0;\n//BPM = bd_minbpm;\n//loop (bd_nres,gmegabuf (n) = BPM; BPM *=  bd_finc; n += bd_recsz;);\n\n\n//##### nur fuer Darstellung\nreg00 = bd_minbpm;\nreg01 = bd_maxbpm;\nreg02 = bd_recsz;\nreg03 = bd_nres;\nreg05 = bd_finc;\n\nreg06 = bd_dat0;\nreg07 = bd_mp0;\n\ntime_st = 0;\ntimediff = 1;","frame_eqs_eel":"//############## THIS IS A CONSTRUCTION SITE #########\n\ndt = min (1/fps,0.1) ; //Stability !\ndec_m = 1-dt*4; dec_s = 1 - dt; dec_xs = 1-dt/6;\nt0 = time - tstart;\n\nbd_b =  bass; bd_bass_ = bd_bass_*dec_m + (1-dec_m)*bd_b; bd_bass = bd_b-bd_bass_;\nbd_m =  mid ; bd_mid_  = bd_mid_ *dec_m + (1-dec_m)*bd_m; bd_mid =  bd_m -bd_mid_;\nbd_t =  treb; bd_treb_ = bd_treb_*dec_m + (1-dec_m)*bd_t; bd_treb = bd_t-bd_treb_;\n\nn = 0; BPM = bd_minbpm; \nloop (bd_nres, \n  gmegabuf(50000+n*bd_recsz) = 0; \n  bd_arg = BPM/60*t0*6.283; \n  gmegabuf (bd_tab0+n*bd_recsz) = BPM; \n  BPM *= bd_finc;\nn+=1);\n\nbd_src=0;\nloop (3, bd_exc = bd_bass*(bd_src==0) + bd_mid*(bd_src==1) + bd_treb*(bd_src==2);\n  oct = 0;\n  loop (bd_oct,\n    bd_slot = 0;\n    bd_pk = 0; bd_mean = 0.0;\n    loop (bd_spo,\n      bd_tabptr = bd_tab0 +                 (oct*bd_spo+ bd_slot)*bd_recsz;\n      n        =  bd_dat0 + (bd_nres*bd_src +oct*bd_spo+ bd_slot)*bd_recsz;\n      BPM = gmegabuf(bd_tabptr); bd_omega = BPM/60*6.283;\n      Feder = sqr(bd_omega); //Res.f = sqrt (Feder)/2pi (Hz)\n      gmegabuf (n+4) = gmegabuf(n+2); //alte pos\n      gmegabuf (n+1) *= 1-.5*dt * sqrt (BPM/300); //damping\n\n      EC_Steps = int (1 + BPM/50)*2;\n      loop (EC_Steps, // Euler-Cauchy steps\n        Kraft = bd_exc - Feder*gmegabuf(n + 2) ;\n        gmegabuf (n+1) += Kraft         * dt/EC_Steps;\n        gmegabuf (n+2) += gmegabuf(n+1) * dt/EC_Steps;  \n      );\n      beatcos = gmegabuf(n+1);  beatsin = gmegabuf(n+2)*bd_omega;\n      quad = sqrt (pow(beatsin,2) + pow(beatcos,2));\n      gmegabuf (n) = gmegabuf(n)*0.8 + 0.2*quad;\n      bd_ampl = gmegabuf(n);\n      bd_mean += bd_ampl;\n      if (bd_ampl > bd_pk, bd_pk=bd_ampl, 0);\n    bd_slot +=1;);\n // Komb. bass,mid,treb\n    bd_slot = 0;    \n    bd_qual = pow(bd_pk/bd_mean*bd_spo-1,1);\n    gmegabuf((bd_src*bd_oct+oct)*2) = bd_qual;\n    loop (bd_spo,\n      m =  50000 + (bd_slot + 0*oct*bd_spo)*bd_recsz;\n      n =  bd_dat0 + (bd_nres*bd_src +oct*bd_spo+ bd_slot)*bd_recsz; //#2x berechnet\n      gmegabuf(m) += (bd_qual)*gmegabuf (n)/12;\n    bd_slot +=1;);\n  oct += 1;);\nbd_src +=1;);\n\n\n//Get maxind\nbd_slot = 0; maxind = 0; bd_pk = 0; bd_mean = 0;\nloop (bd_spo,\n   m =  50000 + bd_slot*bd_recsz;\n   gmegabuf(m) = pow(gmegabuf(m),1);\n   bd_mean += gmegabuf(m);\n   if (gmegabuf(m) > bd_pk, bd_pk = gmegabuf(m); maxind = bd_slot, 0);\nbd_slot += 1);\nquali = bd_pk/bd_mean*bd_spo-1;\n\nn = 0; loop (150, gmegabuf(50+n) *= 0; n+=1);\n\n//KREISE\nbd_src = 0; tsin = 0; tcos = 0;\nloop (3,\n  oct = 0;  \n  loop (bd_oct,\n    n         =  bd_dat0 + (bd_nres*bd_src +oct*bd_spo+ maxind)*bd_recsz;\n    bd_tabptr = bd_tab0  +                 (oct*bd_spo+ maxind)*bd_recsz;\n    BPM = gmegabuf(bd_tabptr); \n\n    im =  gmegabuf(n+1);\n    re =  gmegabuf(n+2) * BPM/60*6.283;\n    bd_cos =  cos (BPM/60*6.28*time);\n    bd_sin = -sin (BPM/60*6.28*time);\n\n//Winkel zurueckdrehen. Das sind nun die Winkel relativ zu cos(oct*time).\n    re0 =  re*bd_cos + im*bd_sin;\n    im0 = -re*bd_sin + im*bd_cos;\n    bd_qual = gmegabuf((bd_src*bd_oct+oct)*2);\n    gmegabuf (50+oct*4)   +=  bd_qual * (im0)*1;\n    gmegabuf (50+oct*4+1) +=  bd_qual * (re0)*1;\n    gmegabuf (50+oct*4+2) +=  bd_qual;\n\n//Summe der besten Beitraege. Das ist der Referenzwinkel.\n    gmegabuf (100+0)  +=  bd_qual * im0;\n    gmegabuf (100+1)  +=  bd_qual * re0;\n\n//Nun sollten wir die Differenzwinkel zur Ref berechnen. Und was damit ? Dann kann ich die\n//Einzelwinkel auf Ref bringen - bringt doch nichts !\n//Ich kann alle auf Null drehen, daraus sinusse erzeuge und addieren ->besserer Takt ?\n    re =  (bd_cos*re0 + bd_sin*im0);\n    im =  (-bd_cos*im0 + bd_sin*re0);\ntsin += im*5;\n\n  oct += 1);\nbd_src +=1);\nq30 = tsin;\n\nvol = bass_att + mid_att + treb_att;\nvol_ = vol_*0.95 + 0.05*vol;\nq29 = vol-vol_;\n\n//Welche Oktave ???\nbd_src = 0; maxo = 0; maxs = 0; maxa = 0;\nloop (3,\n  oct = 1;  \n  loop (bd_oct-1,\n    n =  bd_dat0 + (bd_nres*bd_src +oct*bd_spo+ maxind)*bd_recsz;\n    bd_qual = gmegabuf((bd_src*bd_oct+oct)*2);\n\n    ampl = bd_qual / (1+oct*(maxind/bd_oct)*0);\n    if (ampl>maxa, maxa = ampl; maxs = bd_src; maxo = oct;, 0);\n  oct += 1);\nbd_src +=1);\n\nq28 = pow(4*bd_qual,1.5);\nq31 = q28;\nif(above(q28,50),q28 = pow(5*sin(.5*bd_qual), 2), 0);\n\n//monitor = q31;\n\n\n//Beat-Flash\ntesti = bd_nres*maxs +bd_spo*maxo + maxind;\nif (bor (beat && (prog==0), abs(testi-test0)<2),test0 = testi,0);\nn =  bd_dat0 + (test0)*bd_recsz;\ncreep = gmegabuf(n+1);\nbeat =  (creep>0) * (creepo <0);\nbeatct = if (change, 0, beatct+beat);\nprog = (prog+beat)%8;\ncreepo = creep;\nshow = if (beat, 1, show*0.5);\nq4 = (gmegabuf(n+1)/gmegabuf(n)*1000);\nq2 = prog;\n\n\nif(beat, timediff = time - time_st; time_st = time, timediff = timediff); \nif(below(timediff, .0625), timediff = .0625, timediff = timediff);\nq8 = timediff;\n//avgtime = avgtime*.975 + timediff*.0225;\n//q9 = avgtime;\n\nmonitor = q8;\n\n//Selbst bei Barbie Girl fehlt manchmal der Rhythmus in Band 2,\n//obwohl das der gefuehlte Takt ist - >Problem mit Phasenkorrektur !\n//stehen Phasen bei doppelter Frequenz in Relation ? NEIN.\n\n\n\n\n\n//Problem: Fats Domino (1992) hat 55BPM -> Problem mit 110\n//Problem: 1991 London Beat I been thinking about you - geht nicht - solved\n//Problem: U96 - Love religion (1995) beginnt mit BPM < 20\n//Porblem: adiemus (1995)\n//Konflikt-Beat siehe Michale jackson b&W (1991)\n\n\nq24 = bd_maxbpm;\n//q32 = aspecty;\n\n\nold_bass_flop=bass_flop;\nold_treb_flop=treb_flop;\nold_mid_flop=mid_flop;\nchaos=.9+.1*sin(pulse);\nentropy=if(equal(pulse,-20),1+bass_flop+treb_flop+mid_flop+q4*.002,entropy);\nbass_thresh = above(bass_att,bass_thresh)*2 + (1-above(bass_att,bass_thresh))*((bass_thresh-1.6)*chaos+1.6);\nbass_flop=abs(bass_flop-equal(bass_thresh,2));\ntreb_thresh=above(treb_att,treb_thresh)*2 + (1-above(treb_att,treb_thresh))*((treb_thresh-1.6)*chaos+1.6);\ntreb_flop=abs(treb_flop-equal(treb_thresh,2));\nmid_thresh=above(mid_att,mid_thresh)*2 + (1-above(mid_att,mid_thresh))*((mid_thresh-1.6)*chaos+1.6);\nmid_flop=abs(mid_flop-equal(mid_thresh,2));\nbass_changed=bnot(equal(old_bass_flop,bass_flop));\nmid_changed=bnot(equal(old_mid_flop,mid_flop));\ntreb_changed=bnot(equal(old_treb_flop,treb_flop));\nbass_residual = bass_changed*sin(pulse*1.5) + bnot(bass_changed)*bass_residual;\ntreb_residual = treb_changed*sin(pulse*1.5) + bnot(treb_changed)*treb_residual;\nmid_residual = mid_changed*sin(pulse*1.5) + bnot(mid_changed)*mid_residual;\npulse=if(above(abs(pulse),20),-20,pulse+(bass_thresh+mid_thresh+treb_thresh)*.018);\nq11=mid_residual;\nq12=bass_residual;\nq13=treb_residual;\nq14=sin(pulse);\nq15=cos(pulse*(.5+.1*entropy));\nq16=sin(pulse*(.5+pow(.25,entropy)));\nob_r=sin(time*1.0785+q16);\nob_b=sin(time*0.8445+q15);\nob_g=sin(time*.413+q14);\nib_r=cos(time*0.6+q11*.1);\nib_b=cos(time*1.4055+q12*.1);\nib_g=cos(time*0.833+q13*.1);\nib_size=.05+.03*q12;\nob_size=.03+.02*sin(time*2.321+q12*.2);\nob_a=.6+.4*q13;\nib_a=.9+.1*sin(q12*.3+q14+q11*.5);\nrot=0;\n\n//monitor = q13;\n\n\nbasstime += q29*.1*30/fps;\nq1 = basstime;\n\n//start in most active range\nbasstime = if(below(basstime, -10000), 0, basstime);\nbasstime = if(above(basstime, 10000), 0, basstime);\n\nbasstime += bass_att*0.025 * 30/fps;\nvol2 = pow(bass+mid+treb,2);\nbasssum = vol2;\n\nstickybit = time%2;\n\n//avg vol\n//buffer 1\nvolAvg = volAvg + vol2*equal(stickybit,1);\n//number of samples 1 or framerate\nsample1 = sample1 + equal(stickybit,1);\n//buffer 2\nvolAvg2 = volAvg2 + vol2*equal(stickybit,0);\n//number of samples 2\nsample2 = sample2 + equal(stickybit,0);\n\n//transision\nedge = bnot(equal(bit2,stickybit));\n\nvolAvg = volAvg - volAvg*edge*stickybit;\nvolAvg2 = volAvg2 - volAvg2*edge*equal(stickybit,0);\n\nsample1 = sample1  - sample1*edge*stickybit;\nsample2 = sample2  - sample2*edge*equal(stickybit,0);\n\n//test vol against avg buffer lvl\ndiff = if(equal(stickybit,1), (basssum/(volAvg2/sample2)) , 0);\ndiff = if(equal(stickybit,0), (basssum/(volAvg/sample1)), diff);\n\nq3 = diff;\n//pv_beat = pv_beat*0.2*sqrt(fps/30) + 0.1*(bass_att*bass + mid_att*mid + treb_att*treb)*sqrt(q3);\npv_beat = pv_beat*0.2*sqrt(fps/30) + 0.1*(bass_att*bass_att + mid_att*mid_att + treb_att*treb_att)*(.001*q4)/sqrt(q8);\nq32 = pv_beat;\nmonitor = q32;\n\nbit2 = time%2;\n\ndifftime = difftime + diff*0.03;\nq2 = difftime;\n\nwarp = (bass*bass + mid*mid + treb*treb)*.005;\n\nfoo_r = sin(q1*0.34313);\nfoo_g = sin(q1*0.3675);\nfoo_b = sin(q1*0.55095);\n\nif(above(foo_r, foo_g) && above(foo_r, foo_b), q23 = 1, q23 = 0);\nif(above(foo_g, foo_r) && above(foo_g, foo_b), q21 = 1, q21 = 0);\nif(above(foo_b, foo_r) && above(foo_b, foo_g), q22 = 1, q22 = 0);\nif(equal(q11+q12+q13,0), q22 = 1, 0);\n\nq5 = 30/fps;\n\nq19 = 50;\nq20 = 1;\n\nif(above(q31, 14), q19 = 100, q19 = q19);\n\nif(above(q31, 50), q19 = 500, q19 = q19);\n\n//if(above(q31, 55), \n//     if(above(q3, 3.5), foo = 1.0 + .333/(bass_att*bass_att*bass_att); q20 = 30000, foo = foo);\n//     if(above(bass_att + mid_att + treb_att, 2.5), q19 = foo; q20 = 30000, q19 = q19),\n//     q19 = q19);\n\n\n\n//if(below(bass_att + mid_att + treb_att, 1), q19 = 0, q19 = q19);\n\n\nif(above(q3, 2), q19 = .5 + 10*q8, q19 = q19);","pixel_eqs_eel":"if(q32>1.2*sqrt(bass_att), \n    rot=if(above(q14,0),rad*.2*q15,tan(rad*(.001*q4)));\n    zoom=if(above(q12,1.5),zoom+(1-zoom)*rot*cos(rad*3.14*q12),if(above(q13,2)*above(x,.5+.5*q15),zoom+(1-zoom)*sin(q11*rot*3.14),zoom+(1-zoom)*cos(rad*3*q16)));\n    dx=above(q11,0)*sin(rad*.5*q12);\n    dy=above(q13,0)*sin(rad*.5*q13),\n\n    zoom = q19;\n    zoomexp = q20;\n    rot = 0);","warp":" shader_body { \n  vec3 ret_1;\n  vec4 tmpvar_2;\n  tmpvar_2 = texture (sampler_pw_main, uv_orig);\n  ret_1 = ((texture (sampler_blur1, tmpvar_2.xy).xyz * scale1) + bias1);\n  vec3 tmpvar_3;\n  tmpvar_3 = vec3((((1.0 - ret_1.x) * (1.0 - ret_1.y)) * (1.0 - ret_1.z)));\n  vec2 tmpvar_4;\n  tmpvar_4 = (((texsize.zw * q5) * -3.0) * ((\n    pow (tmpvar_3, vec3(0.333, 0.333, 0.333))\n   + \n    ((((0.5 * tmpvar_3) * (\n      (texture (sampler_blur2, ret_1.xx).xyz * scale2)\n     + bias2)) * ((texture (sampler_blur2, ret_1.yy).xyz * scale2) + bias2)) * ((texture (sampler_blur2, ret_1.zz).xyz * scale2) + bias2))\n  ) + (\n    ((0.25 * ((texture (sampler_blur3, ret_1.xx).xyz * scale3) + bias3)) * ((texture (sampler_blur3, ret_1.yy).xyz * scale3) + bias3))\n   * \n    ((texture (sampler_blur3, ret_1.xx).xyz * scale3) + bias3)\n  )).xy);\n  vec3 tmpvar_5;\n  tmpvar_5 = (((texture (sampler_blur1, \n    (uv_orig + (vec2(1.0, 0.0) * tmpvar_4))\n  ).xyz * scale1) + bias1) - ((texture (sampler_blur1, \n    (uv_orig - (vec2(1.0, 0.0) * tmpvar_4))\n  ).xyz * scale1) + bias1));\n  vec3 tmpvar_6;\n  tmpvar_6 = (((texture (sampler_blur1, \n    (uv_orig + (vec2(0.0, 1.0) * tmpvar_4))\n  ).xyz * scale1) + bias1) - ((texture (sampler_blur1, \n    (uv_orig - (vec2(0.0, 1.0) * tmpvar_4))\n  ).xyz * scale1) + bias1));\n  vec2 tmpvar_7;\n  tmpvar_7.x = tmpvar_5.x;\n  tmpvar_7.y = tmpvar_6.x;\n  vec2 tmpvar_8;\n  tmpvar_8.x = tmpvar_5.y;\n  tmpvar_8.y = tmpvar_6.y;\n  vec2 tmpvar_9;\n  tmpvar_9.x = tmpvar_5.z;\n  tmpvar_9.y = tmpvar_6.z;\n  vec2 tmpvar_10;\n  tmpvar_10 = (uv_orig + ((\n    (((tmpvar_7 * q21) + (tmpvar_8 * q22)) + (tmpvar_9 * q23))\n   * texsize.zw) * 6.0));\n  ret_1 = ((texture (sampler_main, tmpvar_10).xyz + (\n    (texture (sampler_main, uv).xyz - ((texture (sampler_blur1, uv).xyz * scale1) + bias1))\n   * 0.1)) - ((0.00015 * q28) * (\n    ((((\n      (texture (sampler_main, tmpvar_10).x * texture (sampler_main, tmpvar_10).y)\n     * texture (sampler_main, tmpvar_10).z) / (2.0 * q8)) + ((\n      sqrt(treb)\n     * texture (sampler_main, tmpvar_10).x) * texture (sampler_main, tmpvar_10).y)) + ((sqrt(mid) * texture (sampler_main, tmpvar_10).x) * texture (sampler_main, tmpvar_10).z))\n   + \n    ((sqrt(bass) * texture (sampler_main, tmpvar_10).y) * texture (sampler_main, tmpvar_10).z)\n  )));\n  ret_1.x = mix (ret_1.x, (1.01 * texture (sampler_pc_main, tmpvar_10).x), (bass_att * 0.05));\n  ret_1.y = mix (ret_1.y, (1.01 * texture (sampler_pc_main, tmpvar_10).y), (mid_att * 0.05));\n  ret_1.z = mix (ret_1.z, (1.01 * texture (sampler_pc_main, tmpvar_10).z), (treb_att * 0.05));\n  ret_1 = (ret_1 + ((\n    (pow (q3, 1.2) - 0.25)\n   * 0.00667) * tmpvar_2).xyz);\n  vec4 tmpvar_11;\n  tmpvar_11.w = 0.0;\n  tmpvar_11.xyz = ret_1;\n  vec3 tmpvar_12;\n  tmpvar_12 = mix (tmpvar_11, texture (sampler_pc_main, uv), vec4(float((\n    (q32 * sqrt(((\n      ((1.0 - ret_1.x) * (1.0 - ret_1.y))\n     + \n      ((1.0 - ret_1.x) * (1.0 - ret_1.z))\n    ) + (\n      (1.0 - ret_1.y)\n     * \n      (1.0 - ret_1.z)\n    ))))\n   > 1.333)))).xyz;\n  ret_1 = tmpvar_12;\n  vec4 tmpvar_13;\n  tmpvar_13.w = 1.0;\n  tmpvar_13.xyz = tmpvar_12;\n  ret = tmpvar_13.xyz;\n }","comp":" shader_body { \n  vec3 ret_1;\n  ret_1 = mix (texture (sampler_main, uv).xyz, texture (sampler_main, ((0.5 - uv) + 0.5)).xyz, vec3(0.5, 0.5, 0.5));\n  ret_1 = (1.0 - ((ret_1 * \n    (1.0 - ret_1)\n  ) * 4.0));\n  vec4 tmpvar_2;\n  tmpvar_2.w = 1.0;\n  tmpvar_2.xyz = ret_1;\n  ret = tmpvar_2.xyz;\n }","warp_hlsl":"shader_body\n{\n      ret = GetBlur1(tex2D(sampler_pw_main, uv_orig));\n    \n    float3 retx = (1 - ret.x)*(1 - ret.y)*(1 - ret.z);\n    float2 d = texsize.zw*q5*-3*(pow(retx, .333) + .5*(retx)*GetBlur2(ret.x)*GetBlur2(ret.y)*GetBlur2(ret.z) + .25*GetBlur3(ret.x)*GetBlur3(ret.y)*GetBlur3(ret.x));\n    float3 dx = ( GetBlur1(uv_orig + float2(1,0)*d) - GetBlur1(uv_orig-float2(1,0)*d) );\n    float3 dy = ( GetBlur1(uv_orig + float2(0,1)*d) - GetBlur1(uv_orig-float2(0,1)*d) );\n\n    float2 uv_dy = uv_orig + (float2(dx.x, dy.x)*q21 + float2(dx.y, dy.y)*q22 + float2(dx.z, dy.z)*q23)*texsize.zw*6;\n\n    ret = GetPixel(uv_dy) + (GetPixel(uv) - GetBlur1(uv))*0.1 - (0.00015*q28*(GetPixel(uv_dy).x*GetPixel(uv_dy).y*GetPixel(uv_dy).z/(2*q8) + sqrt(treb)*GetPixel(uv_dy).x*GetPixel(uv_dy).y + sqrt(mid)*GetPixel(uv_dy).x*GetPixel(uv_dy).z + sqrt(bass)*GetPixel(uv_dy).y*GetPixel(uv_dy).z));\n\n    ret.x = lerp(ret.x, 1.01*tex2D(sampler_pc_main, uv_dy).x, bass_att*.05);\n    ret.y = lerp(ret.y, 1.01*tex2D(sampler_pc_main, uv_dy).y, mid_att*.05);\n    ret.z = lerp(ret.z, 1.01*tex2D(sampler_pc_main, uv_dy).z, treb_att*.05);\n    ret += mul((pow(q3, 1.2) - .25)*.00667, tex2D( sampler_pw_main, uv_orig ));\n\n    ret = lerp(ret, tex2D(sampler_pc_main, uv), (q32*sqrt((1 - ret.x)*(1 - ret.y) + (1 - ret.x)*(1 - ret.z) + (1 - ret.y)*(1 - ret.z)))>1.333);\n}","comp_hlsl":"shader_body\n{\n    \n    float2 uv_echo = (uv - 0.5)*float2(-1,-1) + .5;\n    ret = lerp( tex2D(sampler_main, uv).xyz, \n                tex2D(sampler_main, uv_echo).xyz, \n                .5\n              )*1;\n    \n    ret = 1 - ret*(1 - ret)*4; //invert\n\n}"}